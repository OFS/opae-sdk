<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OPAE C API: include/opae/enum.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OPAE C API
   &#160;<span id="projectnumber">-..</span>
   </div>
   <div id="projectbrief">FPGA API</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_beaf459716867cfd62f7e910a709c36d.html">opae</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">enum.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>APIs for resource enumeration and managing tokens.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="types_8h_source.html">opae/types.h</a>&gt;</code><br />
</div>
<p><a href="enum_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a277ba17f2377895855545bd82c1f901d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="types__enum_8h.html#a27aaa9bd2d94c9b53602b1a7af49fc6d">fpga_result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="enum_8h.html#a277ba17f2377895855545bd82c1f901d">fpgaEnumerate</a> (const <a class="el" href="types_8h.html#ab868bdeab946a8059abe7e9c114aee56">fpga_properties</a> *filters, uint32_t num_filters, <a class="el" href="types_8h.html#a252f538a10fb51d0988ed52946516d9e">fpga_token</a> *tokens, uint32_t max_tokens, uint32_t *num_matches)</td></tr>
<tr class="separator:a277ba17f2377895855545bd82c1f901d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43a84795de460e8288070b672ef90a59"><td class="memItemLeft" align="right" valign="top"><a class="el" href="types__enum_8h.html#a27aaa9bd2d94c9b53602b1a7af49fc6d">fpga_result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="enum_8h.html#a43a84795de460e8288070b672ef90a59">fpgaCloneToken</a> (<a class="el" href="types_8h.html#a252f538a10fb51d0988ed52946516d9e">fpga_token</a> src, <a class="el" href="types_8h.html#a252f538a10fb51d0988ed52946516d9e">fpga_token</a> *dst)</td></tr>
<tr class="separator:a43a84795de460e8288070b672ef90a59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a150a7a8f46e0d6df12cc329ff7030e21"><td class="memItemLeft" align="right" valign="top"><a class="el" href="types__enum_8h.html#a27aaa9bd2d94c9b53602b1a7af49fc6d">fpga_result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="enum_8h.html#a150a7a8f46e0d6df12cc329ff7030e21">fpgaDestroyToken</a> (<a class="el" href="types_8h.html#a252f538a10fb51d0988ed52946516d9e">fpga_token</a> *token)</td></tr>
<tr class="separator:a150a7a8f46e0d6df12cc329ff7030e21"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>APIs for resource enumeration and managing tokens. </p>
<p>These APIs are the first step for any application using OPAE to discover resources that are present on the system. They allow selective enumeration (i.e. getting a list of resources that match a given list of criteria) and methods to manage the lifecycle of tokens generated by <a class="el" href="enum_8h.html#a277ba17f2377895855545bd82c1f901d">fpgaEnumerate()</a>. </p>

<p class="definition">Definition in file <a class="el" href="enum_8h_source.html">enum.h</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a277ba17f2377895855545bd82c1f901d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a277ba17f2377895855545bd82c1f901d">&#9670;&nbsp;</a></span>fpgaEnumerate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types__enum_8h.html#a27aaa9bd2d94c9b53602b1a7af49fc6d">fpga_result</a> fpgaEnumerate </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="types_8h.html#ab868bdeab946a8059abe7e9c114aee56">fpga_properties</a> *&#160;</td>
          <td class="paramname"><em>filters</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>num_filters</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a252f538a10fb51d0988ed52946516d9e">fpga_token</a> *&#160;</td>
          <td class="paramname"><em>tokens</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>max_tokens</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>num_matches</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Enumerate FPGA resources present in the system</p>
<p>This call allows the user to query the system for FPGA resources that match a certain set of criteria, e.g. all accelerators that are assigned to a host interface and available, all FPGAs of a specific type, etc.</p>
<p><a class="el" href="enum_8h.html#a277ba17f2377895855545bd82c1f901d">fpgaEnumerate()</a> will create a number of <code>fpga_token</code>s to represent the matching resources and populate the array <code>tokens</code> with these tokens. The <code>max_tokens</code> argument can be used to limit the number of tokens allocated/returned by <a class="el" href="enum_8h.html#a277ba17f2377895855545bd82c1f901d">fpgaEnumerate()</a>; i.e., the number of tokens in the returned <code>tokens</code> array will be either <code>max_tokens</code> or <code>num_matches</code> (the number of resources matching the filter), whichever is smaller. Use <a class="el" href="enum_8h.html#a150a7a8f46e0d6df12cc329ff7030e21">fpgaDestroyToken()</a> to destroy tokens that are no longer needed.</p>
<p>To query the number of matches for a particular set of filters (e.g. to allocate a <code>tokens</code> array of the appropriate size), call <a class="el" href="enum_8h.html#a277ba17f2377895855545bd82c1f901d">fpgaEnumerate()</a> with the parameter <code>tokens</code> set to NULL; this will only return the number of matches in <code>num_matches</code>.</p>
<dl class="section note"><dt>Note</dt><dd><a class="el" href="enum_8h.html#a277ba17f2377895855545bd82c1f901d">fpgaEnumerate()</a> will allocate memory for the created tokens returned in <code>tokens</code>. It is the responsibility of the using application to free this memory after use by calling <a class="el" href="enum_8h.html#a150a7a8f46e0d6df12cc329ff7030e21">fpgaDestroyToken()</a> for each of the returned tokens.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">filters</td><td>Array of <code>fpga_properties</code> objects describing the properties of the objects that should be returned. A resource is considered matching if its properties match any one of the supplied filters. To match all FPGA resources, pass an empty filters object (one without any filter criteria set) or pass a NULL filters parameter with num_filters set to 0. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">num_filters</td><td>Number of entries in the <code>filters</code> array, or 0 to match all FPGA resources when <code>filters</code> is NULL. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">tokens</td><td>Pointer to an array of fpga_token variables to be populated. If NULL is supplied, <a class="el" href="enum_8h.html#a277ba17f2377895855545bd82c1f901d">fpgaEnumerate()</a> will not create any tokens, but it will return the number of possible matches in <code>num_match</code>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">max_tokens</td><td>Maximum number of tokens that <a class="el" href="enum_8h.html#a277ba17f2377895855545bd82c1f901d">fpgaEnumerate()</a> shall return (length of <code>tokens</code> array). There may be more or fewer matches than this number; <code>num_matches</code> is set to the number of actual matches. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">num_matches</td><td>Number of resources matching the <code>filter</code> criteria. This number can be higher than the number of tokens returned in the <code>tokens</code> array (depending on the value of <code>max_tokens</code>). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>FPGA_OK on success. FPGA_INVALID_PARAM if invalid pointers or objects are passed into the function. FPGA_NO_DRIVER if OPAE can't find the respective enumeration data structures usually provided by the driver. FPGA_NO_MEMORY if there was not enough memory to create tokens. </dd></dl>

<p class="reference">Referenced by <a class="el" href="hello__events_8c_source.html#l00204">find_fpga()</a>, <a class="el" href="n5010-ctl_8c_source.html#l00107">fpga_open()</a>, <a class="el" href="hello__afu_8c_source.html#l00094">main()</a>, and <a class="el" href="hello__fpga_8c_source.html#l00235">probe_for_ase()</a>.</p>

</div>
</div>
<a id="a43a84795de460e8288070b672ef90a59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43a84795de460e8288070b672ef90a59">&#9670;&nbsp;</a></span>fpgaCloneToken()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types__enum_8h.html#a27aaa9bd2d94c9b53602b1a7af49fc6d">fpga_result</a> fpgaCloneToken </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="types_8h.html#a252f538a10fb51d0988ed52946516d9e">fpga_token</a>&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a252f538a10fb51d0988ed52946516d9e">fpga_token</a> *&#160;</td>
          <td class="paramname"><em>dst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Clone a fpga_token object</p>
<p>Creates a copy of an fpga_token object.</p>
<dl class="section note"><dt>Note</dt><dd>This call creates a new token object and allocates memory for it. It is the responsibility of the using application to free this memory after use by calling <a class="el" href="enum_8h.html#a150a7a8f46e0d6df12cc329ff7030e21">fpgaDestroyToken()</a> for the cloned token.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">src</td><td>fpga_token object to copy </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">dst</td><td>New fpga_token object cloned from 'src' </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>FPGA_OK on success </dd></dl>

</div>
</div>
<a id="a150a7a8f46e0d6df12cc329ff7030e21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a150a7a8f46e0d6df12cc329ff7030e21">&#9670;&nbsp;</a></span>fpgaDestroyToken()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types__enum_8h.html#a27aaa9bd2d94c9b53602b1a7af49fc6d">fpga_result</a> fpgaDestroyToken </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="types_8h.html#a252f538a10fb51d0988ed52946516d9e">fpga_token</a> *&#160;</td>
          <td class="paramname"><em>token</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Destroy a Token</p>
<p>This function destroys a token created by <a class="el" href="enum_8h.html#a277ba17f2377895855545bd82c1f901d">fpgaEnumerate()</a> and frees the associated memory.</p>
<dl class="section note"><dt>Note</dt><dd><a class="el" href="enum_8h.html#a150a7a8f46e0d6df12cc329ff7030e21">fpgaDestroyToken()</a> requires the address of an fpga_token as previously created by <a class="el" href="enum_8h.html#a277ba17f2377895855545bd82c1f901d">fpgaEnumerate()</a> or <a class="el" href="enum_8h.html#a43a84795de460e8288070b672ef90a59">fpgaCloneToken()</a>. Passing any other value results in undefined behavior.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">token</td><td>fpga_token to destroy </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>FPGA_OK on success </dd></dl>

<p class="reference">Referenced by <a class="el" href="n5010-ctl_8c_source.html#l00156">fpga_close()</a>, <a class="el" href="hello__afu_8c_source.html#l00094">main()</a>, and <a class="el" href="hello__fpga_8c_source.html#l00235">probe_for_ase()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
