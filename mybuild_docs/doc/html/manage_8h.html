<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OPAE C API: include/opae/manage.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OPAE C API
   &#160;<span id="projectnumber">-..</span>
   </div>
   <div id="projectbrief">FPGA API</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_beaf459716867cfd62f7e910a709c36d.html">opae</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">manage.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Functions for managing FPGA configurations.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="types_8h_source.html">opae/types.h</a>&gt;</code><br />
</div>
<p><a href="manage_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa8b0dd0eba99f99161ad8b726706ce9c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="types__enum_8h.html#a27aaa9bd2d94c9b53602b1a7af49fc6d">fpga_result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="manage_8h.html#aa8b0dd0eba99f99161ad8b726706ce9c">fpgaAssignPortToInterface</a> (<a class="el" href="types_8h.html#a4ad40f31195233b629bcde187b0556d5">fpga_handle</a> fpga, uint32_t interface_num, uint32_t slot_num, int flags)</td></tr>
<tr class="separator:aa8b0dd0eba99f99161ad8b726706ce9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a768c0a5d0f2494a69470170a29a76578"><td class="memItemLeft" align="right" valign="top"><a class="el" href="types__enum_8h.html#a27aaa9bd2d94c9b53602b1a7af49fc6d">fpga_result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="manage_8h.html#a768c0a5d0f2494a69470170a29a76578">fpgaAssignToInterface</a> (<a class="el" href="types_8h.html#a4ad40f31195233b629bcde187b0556d5">fpga_handle</a> fpga, <a class="el" href="types_8h.html#a252f538a10fb51d0988ed52946516d9e">fpga_token</a> accelerator, uint32_t host_interface, int flags)</td></tr>
<tr class="separator:a768c0a5d0f2494a69470170a29a76578"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ce3163b0a8c0f5c39e1c5acefc049eb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="types__enum_8h.html#a27aaa9bd2d94c9b53602b1a7af49fc6d">fpga_result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="manage_8h.html#a1ce3163b0a8c0f5c39e1c5acefc049eb">fpgaReleaseFromInterface</a> (<a class="el" href="types_8h.html#a4ad40f31195233b629bcde187b0556d5">fpga_handle</a> fpga, <a class="el" href="types_8h.html#a252f538a10fb51d0988ed52946516d9e">fpga_token</a> accelerator)</td></tr>
<tr class="separator:a1ce3163b0a8c0f5c39e1c5acefc049eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e5d00d445c69c94cb122224c47bf735"><td class="memItemLeft" align="right" valign="top"><a class="el" href="types__enum_8h.html#a27aaa9bd2d94c9b53602b1a7af49fc6d">fpga_result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="manage_8h.html#a6e5d00d445c69c94cb122224c47bf735">fpgaReconfigureSlot</a> (<a class="el" href="types_8h.html#a4ad40f31195233b629bcde187b0556d5">fpga_handle</a> fpga, uint32_t slot, const uint8_t *bitstream, size_t bitstream_len, int flags)</td></tr>
<tr class="separator:a6e5d00d445c69c94cb122224c47bf735"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Functions for managing FPGA configurations. </p>
<p>FPGA accelerators can be reprogrammed at run time by providing new partial bitstreams ("green bitstreams"). This file defines API functions for programming green bitstreams as well as for assigning accelerators to host interfaces for more complex deployment setups, such as virtualized systems. </p>

<p class="definition">Definition in file <a class="el" href="manage_8h_source.html">manage.h</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="aa8b0dd0eba99f99161ad8b726706ce9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa8b0dd0eba99f99161ad8b726706ce9c">&#9670;&nbsp;</a></span>fpgaAssignPortToInterface()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types__enum_8h.html#a27aaa9bd2d94c9b53602b1a7af49fc6d">fpga_result</a> fpgaAssignPortToInterface </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="types_8h.html#a4ad40f31195233b629bcde187b0556d5">fpga_handle</a>&#160;</td>
          <td class="paramname"><em>fpga</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>interface_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>slot_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Assign Port to a host interface.</p>
<p>This function assign Port to a host interface for subsequent use. Only Port that have been assigned to a host interface can be opened by <a class="el" href="access_8h.html#addde6b2bafcd6632a2c0b595c6bc0ef3">fpgaOpen()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fpga</td><td>Handle to an FPGA object previously opened that both the host interface and the slot belong to </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">interface_num</td><td>Host interface number </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">slot_num</td><td>Slot number </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>Flags (to be defined) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>FPGA_OK on success FPGA_INVALID_PARAM if input parameter combination is not valid. FPGA_EXCEPTION if an exception occcurred accessing the <code>fpga</code> handle. FPGA_NOT_SUPPORTED if driver does not support assignment. </dd></dl>

</div>
</div>
<a id="a768c0a5d0f2494a69470170a29a76578"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a768c0a5d0f2494a69470170a29a76578">&#9670;&nbsp;</a></span>fpgaAssignToInterface()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types__enum_8h.html#a27aaa9bd2d94c9b53602b1a7af49fc6d">fpga_result</a> fpgaAssignToInterface </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="types_8h.html#a4ad40f31195233b629bcde187b0556d5">fpga_handle</a>&#160;</td>
          <td class="paramname"><em>fpga</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a252f538a10fb51d0988ed52946516d9e">fpga_token</a>&#160;</td>
          <td class="paramname"><em>accelerator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>host_interface</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Assign an accelerator to a host interface</p>
<p>This function assigns an accelerator to a host interface for subsequent use. Only accelerators that have been assigned to a host interface can be opened by <a class="el" href="access_8h.html#addde6b2bafcd6632a2c0b595c6bc0ef3">fpgaOpen()</a>.</p>
<dl class="section note"><dt>Note</dt><dd>This function is currently not supported.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fpga</td><td>Handle to an FPGA object previously opened that both the host interface and the accelerator belong to </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">accelerator</td><td>accelerator to assign </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">host_interface</td><td>Host interface to assign accelerator to </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>Flags (to be defined) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>FPGA_OK on success </dd></dl>

</div>
</div>
<a id="a1ce3163b0a8c0f5c39e1c5acefc049eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ce3163b0a8c0f5c39e1c5acefc049eb">&#9670;&nbsp;</a></span>fpgaReleaseFromInterface()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types__enum_8h.html#a27aaa9bd2d94c9b53602b1a7af49fc6d">fpga_result</a> fpgaReleaseFromInterface </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="types_8h.html#a4ad40f31195233b629bcde187b0556d5">fpga_handle</a>&#160;</td>
          <td class="paramname"><em>fpga</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a252f538a10fb51d0988ed52946516d9e">fpga_token</a>&#160;</td>
          <td class="paramname"><em>accelerator</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Unassign a previously assigned accelerator</p>
<p>This function removes the assignment of an accelerator to an host interface (e.g. to be later assigned to a different host interface). As a consequence, the accelerator referred to by token 'accelerator' will be reset during the course of this function.</p>
<dl class="section note"><dt>Note</dt><dd>This function is currently not supported.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fpga</td><td>Handle to an FPGA object previously opened that both the host interface and the accelerator belong to </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">accelerator</td><td>accelerator to unassign/release </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>FPGA_OK on success </dd></dl>

</div>
</div>
<a id="a6e5d00d445c69c94cb122224c47bf735"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e5d00d445c69c94cb122224c47bf735">&#9670;&nbsp;</a></span>fpgaReconfigureSlot()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types__enum_8h.html#a27aaa9bd2d94c9b53602b1a7af49fc6d">fpga_result</a> fpgaReconfigureSlot </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="types_8h.html#a4ad40f31195233b629bcde187b0556d5">fpga_handle</a>&#160;</td>
          <td class="paramname"><em>fpga</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>slot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>bitstream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>bitstream_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Reconfigure a slot</p>
<p>Sends a green bitstream file to an FPGA to reconfigure a specific slot. This call, if successful, will overwrite the currently programmed AFU in that slot with the AFU in the provided bitstream.</p>
<p>As part of the reconfiguration flow, all accelerators associated with this slot will be unassigned and reset.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fpga</td><td>Handle to an FPGA object previously opened </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">slot</td><td>Token identifying the slot to reconfigure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bitstream</td><td>Pointer to memory holding the bitstream </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bitstream_len</td><td>Length of the bitstream in bytes </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>Flags that control behavior of reconfiguration. Value of 0 indicates no flags. FPGA_RECONF_FORCE indicates that the bitstream is programmed into the slot without checking if the resource is currently in use. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>FPGA_OK on success. FPGA_INVALID_PARAM if the provided parameters are not valid. FPGA_EXCEPTION if an internal error occurred accessing the handle or while sending the bitstream data to the driver. FPGA_BUSY if the accelerator for the given slot is in use. FPGA_RECONF_ERROR on errors reported by the driver (such as CRC or protocol errors).</dd></dl>
<dl class="section note"><dt>Note</dt><dd>By default, fpgaReconfigureSlot will not allow reconfiguring a slot with an accelerator in use. Add the flag FPGA_RECONF_FORCE to force reconfiguration without checking for accelerators in use. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
