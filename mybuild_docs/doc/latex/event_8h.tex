\doxysection{include/opae/event.h File Reference}
\label{event_8h}\index{include/opae/event.h@{include/opae/event.h}}


Functions for registering events and managing the lifecycle for {\ttfamily fpga\+\_\+event\+\_\+handle}s.  


{\ttfamily \#include $<$opae/types.\+h$>$}\newline
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{types__enum_8h_a27aaa9bd2d94c9b53602b1a7af49fc6d}{fpga\+\_\+result}} \mbox{\hyperlink{event_8h_a54fb1847300ff886b4ad857716075083}{fpga\+Create\+Event\+Handle}} (\mbox{\hyperlink{types_8h_acccb4e3dd49efd2b0999b14bf05d5aad}{fpga\+\_\+event\+\_\+handle}} $\ast$event\+\_\+handle)
\item 
\mbox{\hyperlink{types__enum_8h_a27aaa9bd2d94c9b53602b1a7af49fc6d}{fpga\+\_\+result}} \mbox{\hyperlink{event_8h_ab8e748d1c491717d677a96c23dee987b}{fpga\+Destroy\+Event\+Handle}} (\mbox{\hyperlink{types_8h_acccb4e3dd49efd2b0999b14bf05d5aad}{fpga\+\_\+event\+\_\+handle}} $\ast$event\+\_\+handle)
\item 
\mbox{\hyperlink{types__enum_8h_a27aaa9bd2d94c9b53602b1a7af49fc6d}{fpga\+\_\+result}} \mbox{\hyperlink{event_8h_a9c38c9cf434a896e7cf02a7df8dc5c2e}{fpga\+Get\+OSObject\+From\+Event\+Handle}} (const \mbox{\hyperlink{types_8h_acccb4e3dd49efd2b0999b14bf05d5aad}{fpga\+\_\+event\+\_\+handle}} eh, int $\ast$fd)
\item 
\mbox{\hyperlink{types__enum_8h_a27aaa9bd2d94c9b53602b1a7af49fc6d}{fpga\+\_\+result}} \mbox{\hyperlink{event_8h_acee9793072cfe2d18a9603339cf5e8a7}{fpga\+Register\+Event}} (\mbox{\hyperlink{types_8h_a4ad40f31195233b629bcde187b0556d5}{fpga\+\_\+handle}} handle, \mbox{\hyperlink{types__enum_8h_a6eccf38d4643d14fbc51f34e03131fa6}{fpga\+\_\+event\+\_\+type}} event\+\_\+type, \mbox{\hyperlink{types_8h_acccb4e3dd49efd2b0999b14bf05d5aad}{fpga\+\_\+event\+\_\+handle}} event\+\_\+handle, uint32\+\_\+t flags)
\item 
\mbox{\hyperlink{types__enum_8h_a27aaa9bd2d94c9b53602b1a7af49fc6d}{fpga\+\_\+result}} \mbox{\hyperlink{event_8h_aa9f920468d8ff05e7411c925a176f5cb}{fpga\+Unregister\+Event}} (\mbox{\hyperlink{types_8h_a4ad40f31195233b629bcde187b0556d5}{fpga\+\_\+handle}} handle, \mbox{\hyperlink{types__enum_8h_a6eccf38d4643d14fbc51f34e03131fa6}{fpga\+\_\+event\+\_\+type}} event\+\_\+type, \mbox{\hyperlink{types_8h_acccb4e3dd49efd2b0999b14bf05d5aad}{fpga\+\_\+event\+\_\+handle}} event\+\_\+handle)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Functions for registering events and managing the lifecycle for {\ttfamily fpga\+\_\+event\+\_\+handle}s. 

OPAE provides an interface to asynchronous events that can be generated by different FPGA resources. The event API provides functions to register for these events; associated with every event a process has registered for is an fpga\+\_\+event\+\_\+handle, which encapsulates the OS-\/specific data structure for event objects. On Linux, an fpga\+\_\+event\+\_\+handle can be used as a file descriptor and passed to select(), poll(), epoll() and similar functions to wait for asynchronous events. 

\doxysubsection{Function Documentation}
\mbox{\label{event_8h_a54fb1847300ff886b4ad857716075083}} 
\index{event.h@{event.h}!fpgaCreateEventHandle@{fpgaCreateEventHandle}}
\index{fpgaCreateEventHandle@{fpgaCreateEventHandle}!event.h@{event.h}}
\doxysubsubsection{\texorpdfstring{fpgaCreateEventHandle()}{fpgaCreateEventHandle()}}
{\footnotesize\ttfamily \mbox{\hyperlink{types__enum_8h_a27aaa9bd2d94c9b53602b1a7af49fc6d}{fpga\+\_\+result}} fpga\+Create\+Event\+Handle (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{types_8h_acccb4e3dd49efd2b0999b14bf05d5aad}{fpga\+\_\+event\+\_\+handle}} $\ast$}]{event\+\_\+handle }\end{DoxyParamCaption})}

Initialize an event\+\_\+handle

Platform independent way to initialize an event\+\_\+handle used for notifications from the driver to application. For Linux, this function creates an eventfd and returns the eventfd file descriptor in {\ttfamily $\ast$event\+\_\+handle}.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ out}}  & {\em event\+\_\+handle} & Pointer to event handle variable.\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
FPGA\+\_\+\+OK on success. FPGA\+\_\+\+INVALID\+\_\+\+PARAM if {\ttfamily event\+\_\+handle} is NULL. FPGA\+\_\+\+NOT\+\_\+\+SUPPORTED if platform does not support events. 
\end{DoxyReturn}


Referenced by main().

\mbox{\label{event_8h_ab8e748d1c491717d677a96c23dee987b}} 
\index{event.h@{event.h}!fpgaDestroyEventHandle@{fpgaDestroyEventHandle}}
\index{fpgaDestroyEventHandle@{fpgaDestroyEventHandle}!event.h@{event.h}}
\doxysubsubsection{\texorpdfstring{fpgaDestroyEventHandle()}{fpgaDestroyEventHandle()}}
{\footnotesize\ttfamily \mbox{\hyperlink{types__enum_8h_a27aaa9bd2d94c9b53602b1a7af49fc6d}{fpga\+\_\+result}} fpga\+Destroy\+Event\+Handle (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{types_8h_acccb4e3dd49efd2b0999b14bf05d5aad}{fpga\+\_\+event\+\_\+handle}} $\ast$}]{event\+\_\+handle }\end{DoxyParamCaption})}

Destroy an event\+\_\+handle

Destroy handle and free resources. On Linux this corresponds to closing the file descriptor pointed to by handle

\begin{DoxyNote}{Note}
\mbox{\hyperlink{event_8h_ab8e748d1c491717d677a96c23dee987b}{fpga\+Destroy\+Event\+Handle()}} requires the address of an event\+\_\+handle as created by \mbox{\hyperlink{event_8h_a54fb1847300ff886b4ad857716075083}{fpga\+Create\+Event\+Handle()}}. Passing any other value results in undefined behavior.
\end{DoxyNote}

\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em event\+\_\+handle} & Pointer to handle to be destroyed\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
FPGA\+\_\+\+OK on success. FPGA\+\_\+\+INVALID\+\_\+\+PARAM if {\ttfamily event\+\_\+handle} is NULL. 
\end{DoxyReturn}


Referenced by main().

\mbox{\label{event_8h_a9c38c9cf434a896e7cf02a7df8dc5c2e}} 
\index{event.h@{event.h}!fpgaGetOSObjectFromEventHandle@{fpgaGetOSObjectFromEventHandle}}
\index{fpgaGetOSObjectFromEventHandle@{fpgaGetOSObjectFromEventHandle}!event.h@{event.h}}
\doxysubsubsection{\texorpdfstring{fpgaGetOSObjectFromEventHandle()}{fpgaGetOSObjectFromEventHandle()}}
{\footnotesize\ttfamily \mbox{\hyperlink{types__enum_8h_a27aaa9bd2d94c9b53602b1a7af49fc6d}{fpga\+\_\+result}} fpga\+Get\+OSObject\+From\+Event\+Handle (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{types_8h_acccb4e3dd49efd2b0999b14bf05d5aad}{fpga\+\_\+event\+\_\+handle}}}]{eh,  }\item[{int $\ast$}]{fd }\end{DoxyParamCaption})}

Get OS object from event handle

Check validity of event handle, and get the OS object used to subscribe and unsubscribe to events. On Linux, the object corresponds to a file descriptor.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em eh} & Event handle to get the descriptor value from \\
\hline
\mbox{\texttt{ out}}  & {\em fd} & integer to store the descriptor value\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
FPGA\+\_\+\+OK on success. FPGA\+\_\+\+INVALID\+\_\+\+PARAM if {\ttfamily event\+\_\+handle} is invalid. 
\end{DoxyReturn}


Referenced by main().

\mbox{\label{event_8h_acee9793072cfe2d18a9603339cf5e8a7}} 
\index{event.h@{event.h}!fpgaRegisterEvent@{fpgaRegisterEvent}}
\index{fpgaRegisterEvent@{fpgaRegisterEvent}!event.h@{event.h}}
\doxysubsubsection{\texorpdfstring{fpgaRegisterEvent()}{fpgaRegisterEvent()}}
{\footnotesize\ttfamily \mbox{\hyperlink{types__enum_8h_a27aaa9bd2d94c9b53602b1a7af49fc6d}{fpga\+\_\+result}} fpga\+Register\+Event (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{types_8h_a4ad40f31195233b629bcde187b0556d5}{fpga\+\_\+handle}}}]{handle,  }\item[{\mbox{\hyperlink{types__enum_8h_a6eccf38d4643d14fbc51f34e03131fa6}{fpga\+\_\+event\+\_\+type}}}]{event\+\_\+type,  }\item[{\mbox{\hyperlink{types_8h_acccb4e3dd49efd2b0999b14bf05d5aad}{fpga\+\_\+event\+\_\+handle}}}]{event\+\_\+handle,  }\item[{uint32\+\_\+t}]{flags }\end{DoxyParamCaption})}

Register an FPGA event

This function tells the driver that the caller is interested in notification for the event specified by the type and flags pair.

The event\+\_\+handle points to an OS specific mechanism for event notification. An event\+\_\+handle is associated with only a single event.

In case of user interrupts, the flags parameter will be used to specify the vector ID. The value of the flags parameter indicates the vector ID, no bit encoding is used.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em handle} & Handle to previously opened FPGA resource. \\
\hline
\mbox{\texttt{ in}}  & {\em event\+\_\+type} & Type of event \\
\hline
\mbox{\texttt{ in}}  & {\em event\+\_\+handle} & Handle to previously opened resource for event notification. \\
\hline
\mbox{\texttt{ in}}  & {\em flags} & Optional argument for specifying additional information about event. For example irq number for interrupt events. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
FPGA\+\_\+\+OK on success. FPGA\+\_\+\+INVALID\+\_\+\+PARAM if handle does not refer to a resource supporting the requested event, or if event\+\_\+handle is not valid. FPGA\+\_\+\+EXCEPTION if an internal exception occurred while accessing the handle or the event\+\_\+handle. On Linux\+: FPGA\+\_\+\+NO\+\_\+\+DAEMON if the driver does not support the requested event and there is no FPGA Daemon (fpgad) running to proxy it. 
\end{DoxyReturn}


Referenced by main().

\mbox{\label{event_8h_aa9f920468d8ff05e7411c925a176f5cb}} 
\index{event.h@{event.h}!fpgaUnregisterEvent@{fpgaUnregisterEvent}}
\index{fpgaUnregisterEvent@{fpgaUnregisterEvent}!event.h@{event.h}}
\doxysubsubsection{\texorpdfstring{fpgaUnregisterEvent()}{fpgaUnregisterEvent()}}
{\footnotesize\ttfamily \mbox{\hyperlink{types__enum_8h_a27aaa9bd2d94c9b53602b1a7af49fc6d}{fpga\+\_\+result}} fpga\+Unregister\+Event (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{types_8h_a4ad40f31195233b629bcde187b0556d5}{fpga\+\_\+handle}}}]{handle,  }\item[{\mbox{\hyperlink{types__enum_8h_a6eccf38d4643d14fbc51f34e03131fa6}{fpga\+\_\+event\+\_\+type}}}]{event\+\_\+type,  }\item[{\mbox{\hyperlink{types_8h_acccb4e3dd49efd2b0999b14bf05d5aad}{fpga\+\_\+event\+\_\+handle}}}]{event\+\_\+handle }\end{DoxyParamCaption})}

Unregister an FPGA event

This function tells the driver that the caller is no longer interested in notification for the event associated with the event\+\_\+handle

The event\+\_\+handle points to an OS specific mechanism for event notification. An event\+\_\+handle is associated with only a single event.


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em handle} & Handle to previously opened FPGA resource. \\
\hline
\mbox{\texttt{ in}}  & {\em event\+\_\+type} & Type of event to unregister. \\
\hline
\mbox{\texttt{ in}}  & {\em event\+\_\+handle} & Handle to previously registered resource for event notification. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
FPGA\+\_\+\+OK on success. FPGA\+\_\+\+INVALID\+\_\+\+PARAM if handle does not refer to a resource supporting the requested event, or if event\+\_\+handle is not valid. FPGA\+\_\+\+EXCEPTION if an internal error occurred accessing the handle or the event\+\_\+handle. 
\end{DoxyReturn}


Referenced by main().

