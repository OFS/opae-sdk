<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>rsu &mdash; OPAE</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="mem_tg" href="../mem_tg/mem_tg.html" />
    <link rel="prev" title="HSSI ethernet loopback" href="../hssi_ethernet/hssiloopback.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> OPAE
          </a>
              <div class="version">
                2.10.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">OPAE User Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../fpga_api/quick_start/readme.html">Quick Start Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install_guide/installation_guide.html">OPAE Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fpga_api/prog_guide/readme.html">OPAE C API Programming Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pyopae/README.html">OPAE Python Bindings</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">OPAE Libraries</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../build_chain/fpga_api/api_build.html">Building OPAE SDK Artifacts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fpga_api/fpga_api.html">OPAE C API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fpga_api/fpga_cxx_api.html">OPAE C++ Core API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fpga_api/fpga_python_api.html">OPAE Python API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fpga_api/plug_guide/readme.html">Plugin Developer’s Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">OPAE Linux Kernel Drivers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../drv_arch/drv_arch.html">Open Programmable Accelerator Engine (OPAE) Linux Device Driver Architecture</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">OPAE FPGA Tools</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../fpgaconf/fpgaconf.html">fpgaconf</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fpgad/fpgad.html">fpgad</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fpgadiag/README.html">fpgadiag</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fpgainfo/fpgainfo.html">fpgainfo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fpgasupdate/fpgasupdate.html">fpgasupdate</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mmlink/mmlink.html">mmlink</a></li>
<li class="toctree-l1"><a class="reference internal" href="../packager/packager.html">packager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userclk/userclk.html">userclk</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hssi/hssi.html">hssi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../opaevfio/opaevfio.html">opaevfio</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pci_device/pci_device.html">pci_device</a></li>
<li class="toctree-l1"><a class="reference internal" href="../opae.io/opae.io.html">opae.io</a></li>
<li class="toctree-l1"><a class="reference internal" href="../host_exerciser/host_exerciser.html">host_exerciser</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hssi_ethernet/hssistats.html">HSSI ethernet statistics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hssi_ethernet/hssimac.html">HSSI ethernet mac</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hssi_ethernet/hssiloopback.html">HSSI ethernet loopback</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">rsu</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#synopsis">SYNOPSIS</a></li>
<li class="toctree-l2"><a class="reference internal" href="#description">DESCRIPTION</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#mode-1-rsu">Mode 1: RSU</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mode-2-default-fpga-image">Mode 2: Default FPGA Image</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#positional-arguments">POSITIONAL ARGUMENTS</a></li>
<li class="toctree-l2"><a class="reference internal" href="#optional-arguments">OPTIONAL ARGUMENTS</a></li>
<li class="toctree-l2"><a class="reference internal" href="#example">EXAMPLE</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mem_tg/mem_tg.html">mem_tg</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vabtool/vabtool.html">vabtool</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ofs.uio/ofs.uio.html">ofs.uio</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">OPAE</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>rsu</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/docs/fpga_tools/rsu/rsu.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="rsu">
<h1>rsu<a class="headerlink" href="#rsu" title="Permalink to this headline">¶</a></h1>
<div class="section" id="synopsis">
<h2>SYNOPSIS<a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a></h2>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">rsu [-h] [-d] {bmc,bmcimg,retimer,fpga,sdm,fpgadefault} [PCIE_ADDR]</span>
</pre></div>
</div>
</div>
<div class="section" id="description">
<h2>DESCRIPTION<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<div class="section" id="mode-1-rsu">
<h3>Mode 1: RSU<a class="headerlink" href="#mode-1-rsu" title="Permalink to this headline">¶</a></h3>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">rsu bmc --page=(user|factory) [PCIE_ADDR]</span>
<span class="go">rsu retimer [PCIE_ADDR]</span>
<span class="go">rsu fpga --page=(user1|user2|factory) [PCIE_ADDR]</span>
<span class="go">rsu sdm --type=(sr|pr|sr_cancel|pr_cancel) [PCIE_ADDR]</span>
</pre></div>
</div>
<p>Perform RSU (remote system update) operation on PAC device
given its PCIe address.
An RSU operation sends an instruction to the device to trigger
a power cycle of the card only. This will force reconfiguration
from flash for either BMC, Retimer, SDM, (on devices that support these)
or the FPGA.</p>
</div>
<div class="section" id="mode-2-default-fpga-image">
<h3>Mode 2: Default FPGA Image<a class="headerlink" href="#mode-2-default-fpga-image" title="Permalink to this headline">¶</a></h3>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">rsu fpgadefault --page=(user1|user2|factory) --fallback=&lt;csv&gt; [PCIE_ADDR]</span>
</pre></div>
</div>
<p>Set the default FPGA boot sequence. The –page option determines
the primary FPGA boot image. The –fallback option allows a comma-separated
list of values to specify fallback images.</p>
</div>
</div>
<div class="section" id="positional-arguments">
<h2>POSITIONAL ARGUMENTS<a class="headerlink" href="#positional-arguments" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">{bmc,bmcimg,retimer,fpga,sdm,fpgadefault}</span></code></p>
<p>type of RSU operation or set Default FPGA Image operation.</p>
<p><code class="docutils literal notranslate"><span class="pre">PCIE_ADDR</span></code>
PCIe address of device to do rsu (e.g. 04:00.0 or 0000:04:00.0)</p>
</div>
<div class="section" id="optional-arguments">
<h2>OPTIONAL ARGUMENTS<a class="headerlink" href="#optional-arguments" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">-h,</span> <span class="pre">--help</span></code>
show this help message and exit</p>
<p><code class="docutils literal notranslate"><span class="pre">-d,</span> <span class="pre">--debug</span></code>
log debug statements</p>
<p><code class="docutils literal notranslate"><span class="pre">--force</span></code>
force rsu operation</p>
</div>
<div class="section" id="example">
<h2>EXAMPLE<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>rsu<span class="w"> </span>bmc<span class="w"> </span>--page<span class="o">=</span>user<span class="w"> </span><span class="m">25</span>:00.0
</pre></div>
</div>
<p>Triggers a boot of the BMC image (user page) for the device with PCIe
address 25:00.0.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>rsu<span class="w"> </span>bmc<span class="w"> </span>--page<span class="o">=</span>factory<span class="w"> </span><span class="m">25</span>:00.0
</pre></div>
</div>
<p>Triggers a factory boot of the BMC image for the device with
PCIe address 25:00.0.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>rsu<span class="w"> </span>fpga<span class="w"> </span>--page<span class="o">=</span>user2<span class="w"> </span><span class="m">25</span>:00.0
</pre></div>
</div>
<p>Triggers a reconfiguration of the FPGA (user2 page) for the
device with PCIe address 25:00.0.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>rsu<span class="w"> </span>--force<span class="w"> </span>fpga<span class="w"> </span>--page<span class="o">=</span>user2<span class="w"> </span><span class="m">25</span>:00.0
</pre></div>
</div>
<p>Forces a reconfiguration of the FPGA (user2 page) for the
device with PCIe address 25:00.0. Default behavior is to not perform
the rsu operation if DPC (downstream port containment) is not supported
and AER (advanced error reporting) is also not supported. Using –force
changes this behavior to perform rsu operation regardless but may result
in a surprise removal of pci devices which may cause the Linux kernel
to panic.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>rsu<span class="w"> </span>fpga<span class="w"> </span>--page<span class="o">=</span>factory<span class="w"> </span><span class="m">25</span>:00.0
</pre></div>
</div>
<p>Triggers a factory reconfiguration of the FPGA for the device
with PCIe address 25:00.0.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>rsu<span class="w"> </span>sdm<span class="w"> </span>--type<span class="o">=</span>sr<span class="w"> </span><span class="m">25</span>:00.0
</pre></div>
</div>
<p>Triggers Static Region key programming for the device with
PCIE address 25:00.0.</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>rsu<span class="w"> </span>fpgadefault<span class="w"> </span>--page<span class="o">=</span>factory<span class="w"> </span>--fallback<span class="o">=</span>user1,user2<span class="w"> </span><span class="m">25</span>:00.0
</pre></div>
</div>
<p>Sets the FPGA boot sequence to factory with fallbacks user1, user2.</p>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../hssi_ethernet/hssiloopback.html" class="btn btn-neutral float-left" title="HSSI ethernet loopback" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../mem_tg/mem_tg.html" class="btn btn-neutral float-right" title="mem_tg" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2017 Intel Corporation.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>